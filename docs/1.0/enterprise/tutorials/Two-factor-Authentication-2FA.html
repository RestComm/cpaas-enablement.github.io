<!DOCTYPE html>
<html lang="en" class="enterprise-persona">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- In order to avoid flashing of wrong brand we keep the title empty at first and then fill it dynamically -->
    <title data-custom-title="Two-Factor Authentication (2FA) - Restcomm Docs"></title>
    <link rel="canonical" href="
      https://cloud.restcomm.com/docs/tutorials/Two-factor-Authentication-2FA.html
    ">
    <meta name="description" content="Secure online transactions, account sign-ins, mobile apps, websites and more by providing two-factor authentication (2FA) with One-Time Passwords to your users.">
    <meta name="keywords" content="2fa, two-factor authentication, secure online transactions, otp, one-time passwords, #{&quot;spsParm&quot;:&quot;application_name&quot;,&quot;rcText&quot;:&quot;Restcomm&quot;,&quot;defaultText&quot;:&quot;$INFER_FROM_DOMAIN&quot;} two-factor authentication">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" type="image/png" href=""/>
    <link rel="stylesheet" href="../../../../_/css/site.css" title="antora-stylesheet">
    <!-- Right now for demo purposes I'm using google icons, but once we finalize design might be different -->
    <!-- Not using it for now
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      </head>
  <body class="article" style="display: none">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: we could simplify to this after reverse proxy changes are rolled out, but we need to make sure that
           it won't break if we change playbook configuration
      <a class="navbar-item header-logo-link" href="/docs">
      -->
      <a class="navbar-item header-logo-link" href="/docs/">
      </a>
    </div>
  </nav>
  <!-- TODO: need to improve the variable used to decide displaying this nav -->
  <nav class="navbar-enterprise">
    <div class="navbar-enterprise-button-container">
      <button class="navigation-toggle icon-custom-font-right" style="visibility: hidden;">
      </button>
      <!--
      <span class="icon-custom-font-x"><span class="icon-custom-font-back-hamburger"><span class="icon-custom-font-left"><span class="icon-custom-font-right">
      -->
      <button class="navbar-enterprise-burger icon-custom-font-back-hamburger">
      </button>
    </div>
    <div class="navbar-enterprise-container">


      <a class="navbar-enterprise-item" href="/docs/api/overview.html">Reference</a>
      <a class="navbar-enterprise-item" href="/docs/solutions/index.html">Solutions</a>
      <a class="navbar-enterprise-item" href="/docs/tutorials/index.html">Tutorials</a>
      <a class="navbar-enterprise-item" href="/docs/visual-designer/index.html">Visual Designer</a>


    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="docs" data-version="1.0"  style="display: none;">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <!-- Not applicable to our Enterprise docs
    <h3 class="title"><a href="../../index.html">docs</a></h3>
    -->
  <ul class="nav-list">
      <li class="nav-item" data-depth="0">
          <ul class="nav-list">
      <li class="nav-item" data-depth="1">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              icomoon2-font-reference-api
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html">REST API</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html">Overview</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html#_api_endpoint">API Endpoint</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html#_authentication">Authentication</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html#_requests">Requests</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html#_responses">Responses</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/overview.html#_paging">Paging</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              icomoon2-font-reference-voice
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/voice-category.html">Voice</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/available-phone-numbers-api.html">Available Phone Numbers</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html">Calls</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#_call_list_resource_uri">Call List Resource URI</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#_making_a_call_to_a_sip_account">Making a Call</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#_modifying_live_calls">Modifying Live Calls</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#examples">Examples</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#_list_filter">List Filter</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/calls-api.html#_paging_information">Paging Information</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html">Clients</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_create_a_client">Create a Client</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_delete_a_client">Delete a Client</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_change_client_s_password">Change Client&#8217;s Password</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_get_list_of_available_clients">Get a List of Available Clients</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/conferences-api.html">Conference Management</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/conferences-api.html#_supported_operations">Supported Operations</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/conferences-api.html#_conference_list_resource_uri">Conference List Resource URI</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/participants-api.html">Conference Participants Management</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/participants-api.html#_participant_list_resource_uri">Participants List Resource URI</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html">Incoming Phone Numbers</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incomingphonenumber_instance_resource">IncomingPhoneNumber Instance Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incomingphonenumbers_list_resource">IncomingPhoneNumbers List Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_local_incomingphonenumber_factory_resource">Local IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_toll_free_incomingphonenumber_factory_resource">Toll-Free IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_mobile_incomingphonenumber_factory_resource">Mobile IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_attach_a_phone_number_to_an_application">Attach a phone number to an application</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_delete_a_phone_number">Delete a phone number</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_list_of_phone_numbers">List of Phone Numbers</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incoming_phone_number_regex_support">Incoming Phone Number Regex Support</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/recordings-api.html">Recordings</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/email-api.html">Email</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              icomoon2-font-reference-sms
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-category.html">SMS</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/available-phone-numbers-api.html">Available Phone Numbers</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html">Clients</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_create_a_client">Create a Client</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_delete_a_client">Delete a Client</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_change_client_s_password">Change Client&#8217;s Password</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/clients-api.html#_get_list_of_available_clients">Get a List of Available Clients</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html">Incoming Phone Numbers</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incomingphonenumber_instance_resource">IncomingPhoneNumber Instance Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incomingphonenumbers_list_resource">IncomingPhoneNumbers List Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_local_incomingphonenumber_factory_resource">Local IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_toll_free_incomingphonenumber_factory_resource">Toll-Free IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_mobile_incomingphonenumber_factory_resource">Mobile IncomingPhoneNumber Factory Resource</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_attach_a_phone_number_to_an_application">Attach a phone number to an application</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_delete_a_phone_number">Delete a phone number</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_list_of_phone_numbers">List of Phone Numbers</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/incoming-phone-numbers-api.html#_incoming_phone_number_regex_support">Incoming Phone Number Regex Support</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-api.html">Messages</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-api.html#_send_sms">Send SMS</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-api.html#_get_sms_list">Get SMS List</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-api.html#_get_single_sms_information">Get single SMS Information</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="4">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/sms-api.html#_sms_attributes">SMS Attributes</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/email-api.html">Email</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/account-api.html">Accounts</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/applications-api.html">Applications</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/notifications-api.html">Notifications</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../api/usage-records-api.html">Usage Records</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="1">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              icomoon2-font-reference-rcml
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/overview.html">RCML</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/overview.html">Overview</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/overview.html#_how_restcomm_interacts_with_your_application">How wlparam:replace[textMode="sps",parmText="application_name",text="Restcomm",defaultText="$INFER_FROM_DOMAIN"</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/overview.html#_the_rcml_verbs">RCML Verbs</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/dial-rcml.html">Dial</a>
              <button class="nav-toggle"></button>
            </span>
          </div>
          <ul class="nav-list">
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/client-rcml.html">Client</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/conference-rcml.html">Conference</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/number-rcml.html">Number</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="3">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/sip-rcml.html">SIP</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/email-rcml.html">Email</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/gather-rcml.html">Gather</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/say-rcml.html">Say</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/play-rcml.html">Play</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              icomoon2-font-reference-sms
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/sms-rcml.html">SMS</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/hangup-rcml.html">Hangup</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/pause-rcml.html">Pause</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/redirect-rcml.html">Redirect</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/record-rcml.html">Record</a>
              
            </span>
          </div>
              </li>
      <li class="nav-item" data-depth="2">
          <div class="nav-flex-container">
            <span class="nav-flex-item-icon
              
              
              
              
            "></span>
            <span>
              <a class="nav-link nav-flex-item-text" href="../rcml/reject-rcml.html">Reject</a>
              
            </span>
          </div>
              </li>
  </ul>
      </li>
  </ul>
      </li>
  </ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore" style="display: none;">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<!--

-->
<div class="toolbar" role="navigation" style="display: none;">
  <button class="navigation-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">docs</a></li>
    <li class="crumb"><a href="Two-factor-Authentication-2FA.html">Two-Factor Authentication (2FA)</a></li>
  </ul>
</nav>
</div>
<article class="doc fix-anchor-links-position">
  <h1>Two-Factor Authentication (2FA)</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Two factor authentication (2FA) API lets you to send One Time Passowrd (OTP) using SMS, Voice or email.</p>
</div>
<div class="paragraph">
<p>2FA allows you to add a second layer of security to your Application in addition to the user-id and password. The flexibility of using any channel makes sure your users get OTP even when they experience issue with one of the channels.</p>
</div>
<div class="paragraph">
<p><strong>User enters your application</strong></p>
</div>
<div class="paragraph">
<p>User visits your website or mobile app and attempts to log into his account, authorize a transaction, or perform another action that requires two-factor authentication from a new device.</p>
</div>
<div class="paragraph">
<p><strong>User is prompted to enter his phone number</strong></p>
</div>
<div class="paragraph">
<p><span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span> receives the login attempt and prompts the user to enter his phone number in order to authorize the new device.</p>
</div>
<div class="paragraph">
<p><strong>PIN code is sent to the user via SMS, phone call or email depending on API called</strong></p>
</div>
<div class="paragraph">
<p>Once the user enters a valid phone number, from your application you will need to ask <span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span> to send a verification code to that phone number by using the HTTP REST API Call Below.</p>
</div>
<div class="paragraph">
<p><strong>Categories</strong></p>
</div>
<div class="paragraph">
<p>2FA can be broadly classified into four categories:</p>
</div>
<div class="paragraph">
<p><strong>Send</strong>
<strong>Verify</strong>
<strong>Control</strong>
<strong>Session Detail Record</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_one_time_passwords_api_reference"><a class="anchor" href="#_sending_one_time_passwords_api_reference"></a>Sending One-Time Passwords - API Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sending a verification code requires basic authorization that includes your account SID and auth token. Below is the format you have to use in order to send a verification code to the user&#8217;s phone number.</p>
</div>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/send</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP POST: Send a verification code through SMS, phone call or email to the specified destination.</p>
</div>
<div class="paragraph">
<p><strong>Request Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service (Required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of your service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from (Required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The source address that is making a call, or sending the SMS or email containing the verification code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">to (Required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The destination address to send the OTP message containing the verification code to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">body (Required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The content of the OTP message. Use {code} as a placeholder for the location of the verification code in your SMS content. This {code} will be replaced automatically with a random code generated by the system</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A method for sending OTP message. There are 3 options: sms, call, email. If not passed, default is sms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP message will be sent on behalf of given accountSid. The accountSid has to be valid sub-account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject (Required in email channel)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email subject for the OTP message, it&#8217;s required only in email channel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">language (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text-to-Speech (TTS) language for announcing OTP message over call channel. AWS Polly is default TTS engine. To use another engine, use format like : &lt;engine&gt;.&lt;language-code&gt; for example: nuance.ja-JP. More information about language, please visit <a href="https://$DOMAIN/docs/rcml/say-rcml.html" class="non-sps-text non-sps-link" data-orig-text="Say-RCML">Say-RCML</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">repeat (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of times the TTS OTP message will be played. It&#8217;s only required in call channel, default value is 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of digits for OTP. By default, 6 digits number will be generated for OTP code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">voice (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Man or woman voice for TTS call channel.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Responde Body</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sub error code for the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message for describing sub error code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique OTP request identifier for the OTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>send API will return Error Code and corresponding HTTP Error as mentioned in <a href="#_common_response_error_code">Common Response Error Code</a></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>", // the name of your service
    "from" : "+XXXXXXXXX", // the SMS sender phone number
    "to" : "+XXXXXXXXXX", // the SMS recepient phone number
    "body": "Your verification code is: \{code}" // SMS body, containing the verification code
}</pre>
</div>
</div>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/send">https://$DOMAIN/2fa/send</span> \
--user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
    "from" : "+13216549878",
    "to" : "+13216549879",
    "body": "Your verification code is: \{code}"
}</pre>
</div>
</div>
<div class="paragraph">
<p>If send is successful, below is the response returned:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"code":200,"message":"OK","requestID":"OTPb6eb071d21124dbab20b095c25f1274f"}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verifying_one_time_passwords_api_reference"><a class="anchor" href="#_verifying_one_time_passwords_api_reference"></a>Verifying One-Time Passwords - API Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>User receives the one-time PIN code via SMS, phone call or email, gets back to your application and enters it in order to complete the verification process. Verifying the code is simple and requires basic authorization that includes your account SID and auth token.</p>
</div>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/verify</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP Method: POST: Verifies the code that was sent through SMS, phone call or email to the destination</p>
</div>
<div class="paragraph">
<p><strong>Request Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of your service.<br>
* For backward compatibility, this is mandatory if API is called by passing the number instead of requestId explained below.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The phone number to which the SMS containing the verification code was sent to.
* Not needed if you are using verify via requestId or will be ignored even if passed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requestID was received when initiating OTP message. This parameter can be ignored if the service and number attributes are being used.
* Not needed if using number to verify the OTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If OTP message was initiated on behalf on accountSid, verify will require to have same accountSid to be able to verify the OTP request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The verification code that was sent to the user through SMS.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Responde Body</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sub error code for the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message for describing sub error code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique OTP request identifier for the OTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>verify API will return Error Code and corresponding HTTP Error as mentioned in <a href="#_common_response_error_code">Common Response Error Code</a>. In addition below are the Error&#8217;s that it can return</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">HTTP Status</th>
<th class="tableblock halign-left valign-top">Error Message</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Category</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">470</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid OTP Unique Id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueID which is not present in-system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">471</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is already verified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in-system but already verified (successfully)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">472</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in the system but expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">473</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is cancelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in the system but cancelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">474</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid OTP Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present and Invalid Code is passed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example (for old API):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>", // the name of your service
    "number" : "+XXXXXXXXXX",  // the phone number of the SMS recepient
    "code": "XXXXX" // the verification code
}</pre>
</div>
</div>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/verify">https://$DOMAIN/2fa/verify</span> \
  --user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
    "number" : "+13216549879",
    "code": "294228"
}</pre>
</div>
</div>
<div class="paragraph">
<p>Example (for latest API):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>", // the name of your service
    "requestId" : "OTPYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY",  // the unique OTP Id generated when send was called
    "code": "XXXXX" // the verification code
}</pre>
</div>
</div>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/verify">https://$DOMAIN/2fa/verify</span> \
  --user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
    "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
    "requestId" : "OTPb6eb071d21124dbab20b095c25f1274f",
    "code": "294228"
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_control"><a class="anchor" href="#_control"></a>Control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Control API allows App developers to <strong>cancel</strong> already sent API or <strong>resend</strong> the OTP (resend is in roadmap)</p>
</div>
<div class="sect2">
<h3 id="_cancel_one_time_passwords_api_reference"><a class="anchor" href="#_cancel_one_time_passwords_api_reference"></a>Cancel One-Time Passwords - API Reference</h3>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/cancel</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP Method: POST: Cancel the code that was sent through SMS/ Call/ Email to the destination</p>
</div>
<div class="paragraph">
<p><strong>Request Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestId (Required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requestID was received when initiating OTP message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid (Optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If OTP message was initiated on behalf on accountSid, it requires to have same accountSid to be able to cancel the OTP request.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Responde Body</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sub error code for the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message for describing sub error code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique OTP request identifier for the OTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>cancel API will return Error Code and corresponding HTTP Error as mentioned in <a href="#_common_response_error_code">Common Response Error Code</a>. In addition below are the Error&#8217;s that it can return</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">HTTP Status</th>
<th class="tableblock halign-left valign-top">Error Message</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Category</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">490</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid OTP Unique Id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control (Cancel for now, but may be other too in future) is called for UniqueID which is not present in-system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">471</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is already verified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in-system but already verified (successfully)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">472</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in the system but expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">473</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP is cancelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present in the system but cancelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">474</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid OTP Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify is called for UniqueId which is present and Invalid Code is passed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "requestId":"XXXXXX" // the requestID received when initiating OTP request.
    "accountSid": "XXXXX"
}</pre>
</div>
</div>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/cancel">https://$DOMAIN/2fa/cancel</span> \
  --user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
    "requestId" : "OTPabc2128918293123413216549879",
    "accountSid": "AC123461724187287abcbas791282cf"
}</pre>
</div>
</div>
<div class="paragraph">
<p>If cancel is successful, you should see below response</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"code":200,"message":"canceled","requestID":"OTPabc2128918293123413216549879"}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_session_detail_record_sdr"><a class="anchor" href="#_session_detail_record_sdr"></a>Session Detail Record (SDR)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Session Detail Record API allows to retrieve specific or list of OTP session and its corresponding details like which channel was used to send OTP and underlying error if channel successfully delivered OTP to end user or if there was any error. It also allows to filter based on certain criterias.</p>
</div>
<div class="paragraph">
<p>Other very important functionality exposed by SDR is Usage Report that allows to retrieve the usage of 2FA for specific period. It also allows to pass specific filter criterias.</p>
</div>
<div class="sect2">
<h3 id="_get_list_of_one_time_passwords_api_reference"><a class="anchor" href="#_get_list_of_one_time_passwords_api_reference"></a>Get list of One-Time Passwords - API Reference</h3>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/search</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP Method: GET: Returns a list of OTP records from the provided AccountSid, subject to the provided paging, filtering and sorting URL query parameters.</p>
</div>
<div class="sect3">
<h4 id="_paging"><a class="anchor" href="#_paging"></a>Paging</h4>
<div class="paragraph">
<p>The following paging parameters are supported</p>
</div>
<table class="tableblock frame-top grid-rows spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Which page of OTP records to return, starting from 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pageSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of records returned per page.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filtering"><a class="anchor" href="#_filtering"></a>Filtering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following filtering parameters are supported</p>
</div>
<table class="tableblock frame-top grid-rows spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that is initiated by this accountSid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that has this service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that is initiated via this channel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that is initiated by this number/email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that is sent to this number/email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that has the target sid of SMS/ Call/ Email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that has the status. Possible values are successful, canceled, expired</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP that has occurred on or after this date. Specify the date in GMT and format as YYYY-MM-DD.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include OTP list that has occurred on or before this date. Specify the date in GMT and format as YYYY-MM-DD.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>search API will return Error Code and corresponding HTTP Error as mentioned in <a href="#_common_response_error_code">Common Response Error Code</a>.</p>
</div>
<div class="paragraph">
<p>The response returned is JSON body as shown in example below. Each SDR parameters are as explained below</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response Paremeter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OTP UniqueId that was returned when <strong>send</strong> API was called</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">service parameter passed in when <strong>send</strong> API was called</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid parameter passed in when <strong>send</strong> API was called</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateCreated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when this OTP requested was initiated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateUpadtes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when this OTP SDR was updated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">staus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of this OTP request. Possible values are successful, expired or cancelled<br>
* successful : OTP was successfully verified by <strong>verify</strong> API call
* expired : OTP expired
* cancelled : OTP was cancelled either by calling <strong>cancel</strong> API or because <strong>send</strong> API was called to send new OTP while previous one has not yet been verified or expired.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">uri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique URI that you can call to get only this specific OTP SDR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of <strong>verfiy</strong> API calls that captures additional details like if it was vaild or invalid and timestamp when verify was received by system. It also captures code used by verify API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This captures the events like sms, call or email that was sent to end user. It has all details like sender, recipient, targetSid which is underlying platform <span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span> id. It also exposes channel Error and message if delivery of SMS, Call or email fails.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X GET \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/search">https://$DOMAIN/2fa/search</span> \
  --user  ' {your_account_SID}:{your_account_token}' \
  -d '{  "pageSize": "2", "page":"0", "status":"success"}'</pre>
</div>
</div>
<div class="paragraph">
<p>Example response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
   "page":0,
   "num_pages":3,
   "page_size":2,
   "total":6,
   "start":0,
   "end":1,
   "uri":"/2fa/search",
   "first_page_uri":"/2fa/search?pageSize=2&amp;page=0&amp;accountSid=ACae6e420f425248d6a26948c17a9e2acf&amp;status=success",
   "previous_page_uri":null,
   "next_page_uri":"/2fa/search?pageSize=2&amp;page=1&amp;accountSid=ACae6e420f425248d6a26948c17a9e2acf&amp;status=success",
   "twoFaOtpSdrs":[
      {
         "sid":"OTP45925dfe6ec948b3a861bdb46a6a2aaa",
         "service":"<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
         "accountSid":"ACae6e420f425248d6a26948c17a9e2acf",
         "dateCreated":"2019-07-22 09:53:51",
         "dateUpdated":"2019-07-22 09:54:20",
         "status":"success",
         "uri":"/2fa/search/OTP45925dfe6ec948b3a861bdb46a6a2aaa",
         "checks":[
            {
               "sid":"OTCfd8ff5e692d0467cb461e7fb1517fc6d",
               "dateReceived":"2019-07-22 09:54:20",
               "status":"valid",
               "code":"398064"
            }
         ],
         "events":[
            {
               "sid":"OTE8be6467b0cef485fa094e2271c5d2bb6",
               "dateCreated":"2019-07-22 09:53:52",
               "channel":"sms",
               "sender":"120120105123",
               "recipient":"84389931141",
               "targetSid":"SMfbf420b9ded1412e94c6fb110ebc227c",
               "channelStatus":"failed",
               "channelErrorCode":null,
               "channelErrorMessage":null
            }
         ]
      },
      {
         "sid":"OTP5854f43a9a0842ecae9e3e47bdfc754d",
         "service":"<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
         "accountSid":"ACae6e420f425248d6a26948c17a9e2acf",
         "dateCreated":"2019-07-23 08:33:18",
         "dateUpdated":"2019-07-23 08:37:01",
         "status":"success",
         "uri":"/2fa/search/OTP5854f43a9a0842ecae9e3e47bdfc754d",
         "checks":[
            {
               "sid":"OTCf71283a7aacc4f9d9c800d93f542828a",
               "dateReceived":"2019-07-23 08:37:01",
               "status":"valid",
               "code":"826345"
            }
         ],
         "events":[
            {
               "sid":"OTE9edeea4cb61e46ceb278ed5851b0810d",
               "dateCreated":"2019-07-23 08:33:18",
               "channel":"sms",
               "sender":"12012010540",
               "recipient":"919960639901",
               "targetSid":"SM969f5e6b641a4d04a3aa2b9fc3727c70",
               "channelStatus":"undelivered",
               "channelErrorCode":"30008",
               "channelErrorMessage":"Unknown error"
            }
         ]
      }
   ]
}</pre>
</div>
</div>
<div class="sect2">
<h3 id="_get_single_one_time_passwords_api_reference"><a class="anchor" href="#_get_single_one_time_passwords_api_reference"></a>Get single One-Time Passwords - API Reference</h3>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/search/{OTPSid}</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP Method: GET: Return OTP session information which is identified by OTP Sid.</p>
</div>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>search API will return Error Code and corresponding HTTP Error as mentioned in <a href="#_common_response_error_code">Common Response Error Code</a>. In addition below are the Error&#8217;s that it can return</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">HTTP Status</th>
<th class="tableblock halign-left valign-top">Error Message</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Category</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">480</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid OTP Unique Id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control (Cancel for now, but may be other too in future) is called for UniqueID which is not present in-system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X GET \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/search/OTPabc2128918293123413216549879">https://$DOMAIN/2fa/search/OTPabc2128918293123413216549879</span> \
  --user  ' {your_account_SID}:{your_account_token}'</pre>
</div>
</div>
<div class="paragraph">
<p>Example response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    {
        "sid":"OTPe2bd1d6583194aa1aa3892cea1e6d824",
        "service" : "<span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span>",
        "accountSid":"ACae6e420f425248d6a26948c17a9e2acf",
        "dateCreated":"2019-07-22 04:40:31",
        "dateUpdated":"2019-07-22 04:40:31",
        "status":"expired",
        "uri":"/2fa/search/OTPe2bd1d6583194aa1aa3892cea1e6d824",
        "checks":[],
        "events":[
            {
                "sid":"OTE243d763ffe7747b9a56d395a9e6a7923",
                "dateCreated":"2019-07-22 04:40:31",
                "channel":"sms",
                "sender":"120120105123",
                "recipient":"120120105124",
                "targetSid":"SMd0a8b9819dfa42548bd3c306daade4f3",
                "channelStatus":"undelivered",
                "channelErrorCode":"30008",
                "channelErrorMessage":"Unknown error"
            }
        ]
    }
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_usage_record_one_time_passwords_api_reference"><a class="anchor" href="#_usage_record_one_time_passwords_api_reference"></a>Usage record One-Time Passwords - API Reference</h3>
<div class="paragraph">
<p>The Usage record REST resource provides a simple API to retrieve usage made by your 2FA account during any time period and by any usage channel. This makes it easy to build reporting and analytics tools for your application.</p>
</div>
<div class="paragraph">
<p><strong>Base Resource URI</strong></p>
</div>
<div class="paragraph">
<p><span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN">https://$DOMAIN</span></p>
</div>
<div class="paragraph">
<p><strong>Verification Code Resource URI</strong></p>
</div>
<div class="paragraph">
<p>/2fa/usage/record/{sub-resource}</p>
</div>
<div class="paragraph">
<p><strong>Supported Operations</strong></p>
</div>
<div class="paragraph">
<p>HTTP Method: Supports both GET and POST: Return usage record.</p>
</div>
<div class="paragraph">
<p><strong>Request Sub resource</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Sub resource</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on daily basis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on monthly basis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yearly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on yearly basis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Today</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on today.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yesterday</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on yesterday.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ThisMonth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on this month.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastMonth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage record on last month.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Request Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage record that has the channel. Possible values are<br>
* sms<br>
* call<br>
* email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage record that has initiated by the accountSid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include usage record that has occurred on or after this date. Specify the date in GMT and format as YYYY-MM-DD.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include usage record that has occurred on or before this date. Specify the date in GMT and format as YYYY-MM-DD.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Successfully query usage records.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401 Unauthorized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credential is not correct.</p>
<p class="tableblock">From the bash terminal you can run the command below:</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>HTTP GET Example</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X GET \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/usage/record/daily?channel=call">https://$DOMAIN/2fa/usage/record/daily?channel=call</span> \</pre>
</div>
</div>
<div class="paragraph">
<p>Example Response</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"usageRecords":[{
        "category":"call",
        "description":"2FA sent by CALLS",
        "accountSid":"ACae6e420f425248d6a26948c17a9e2acf",
        "startDate":"2019-07-22",
        "endDate":"2019-07-23",
        "count":"2",
        "unit":"Calls",
        "uri":"/2fa/usage/record?endDate=2019-07-23&amp;category=call&amp;startDate=2019-07-22"
        }
    ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>HTTP POST example</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X POST \
  <span class="non-sps-text non-sps-link" data-orig-text="https://$DOMAIN/2fa/usage/record">https://$DOMAIN/2fa/usage/record</span> \
  --user  ' {your_account_SID}:{your_account_token}'
    -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -d '{
    "channel" : "call",
    "accountSid": "AC123461724187287abcbas791282cf"
}</pre>
</div>
</div>
<div class="paragraph">
<p>Example Response</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"usageRecords":[{
        "category":"call",
        "description":"2FA sent by CALLS",
        "accountSid":"ACae6e420f425248d6a26948c17a9e2acf",
        "startDate":"2019-07-22",
        "endDate":"2019-07-23",
        "count":"2",
        "unit":"Calls",
        "uri":"/2fa/usage/record?endDate=2019-07-23&amp;category=call&amp;startDate=2019-07-22"
        }
    ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>You can also test your service using <a href="https://www.getpostman.com/">Postman</a> or any other alike client.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_response_error_code"><a class="anchor" href="#_common_response_error_code"></a>Common Response Error Code</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Response Parameters</strong></p>
</div>
<div class="paragraph">
<p>Below table shows Error Codes and corresponding HTTP Response across all API calls for 2FA</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">HTTP Status</th>
<th class="tableblock halign-left valign-top">Error Message</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Category</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validation failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If validation failed for provided accountSid and token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">450</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AccountSid passed is wrong or not sub-account of account zzzzz.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">zzzzz is accountSid passed in validation request, but is wrong or not sub-account of accountSid passed in authentication header.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">451</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory parameter xxx is missing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xxx is actual parameter name. Comma separated parameters name if multiple.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">452</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Underlying message from <span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error returned by underlying <span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span> platform.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column-container">
      <div class="footer-column">
        <h5 class="footer-column-title">Products</h5>
          <p><a class="footer-products-item" href="/docs/api/voice-category.html">Programmable Voice</a></p>
          <p><a class="footer-products-item" href="/docs/api/sms-category.html">Programmable SMS</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Use Cases</h5>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Two-factor-Authentication-2FA.html">Two-Factor Authentication (2FA)</a></p>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Phone-number-masking.html">Phone Number Masking</a></p>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Create-a-Voicemail-to-Email-app-with-zero-coding.html">Voicemail to Email Application</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Learn</h5>

          <p><a id="terms-link" class="non-sps-text sps-link" data-parm-link="terms_link" href="/docs/terms.html" data-default-link="/docs/terms.html">Terms And Conditions</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Contact us</h5>
        <p><a class="sps-text sps-link" data-parm-text="company_name" data-parm-link="company_link" href="https://www.telestax.com/" data-default-text="Company Name" data-default-link="#">Telestax</a></p>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<!--
<script>hljs.initHighlighting()</script>
-->
<!--
  Tried to get this chunk into js/05-countly.js but it has some issues with the async loading so fell back to putting it here
  where it works for some reason
-->
  <!-- Only enable countly if the key is set -->
  <script type='text/javascript' src='https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'></script>
  <script>
    var Countly = Countly || {}
    Countly.q = Countly.q || []

    // provide countly initialization parameters
    Countly.app_key = '56bdc77c4c53e32ebd439e2586dd4ee22b3d3ad0'
    Countly.url = 'https://restcomm.count.ly'

    Countly.q.push(['track_sessions'])
    Countly.q.push(['track_pageview'])
    Countly.q.push(['track_clicks'])
    Countly.q.push(['track_errors'])
    Countly.q.push(['track_links'])
    Countly.q.push(['track_forms'])
    Countly.q.push(['collect_from_forms'])

    // send event
    Countly.q.push(['add_event', {
      key: 'Restcomm CSPs Documentation',
      segmentation: {},
    }]);

    // load countly script asynchronously
    (function () {
      var cly = document.createElement('script')
      cly.type = 'text/javascript'
      cly.async = true
      // enter url of script here
      cly.src = 'https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'
      cly.onload = function () {
        Countly.init()
      }
      var s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(cly, s)
    })()
  </script>
<!-- UserBack Tool -->
<script>
    Userback = window.Userback || {};
    Userback.access_token = '5061|10149|r9Ure7pw7zJFVyflkflhPEQJvrsbdWcpYS5Vz3safDjZZg7ukX';
    (function(id) {
        var s = document.createElement('script');
        s.async = 1;s.src = 'https://static.userback.io/widget/v1.js';
        var parent_node = document.head || document.body;parent_node.appendChild(s);
    })('userback-sdk');
</script>

  </body>
</html>
