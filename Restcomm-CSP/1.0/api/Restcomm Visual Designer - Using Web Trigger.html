<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Trigger Overview :: Restcomm CPaaS Enablement Docs</title>
    <link rel="canonical" href="https://www.restcomm.com/docs/Restcomm-CSP/1.0/api/Restcomm Visual Designer - Using Web Trigger.html">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" type="image/png" href="../../../_/img/favicon.png"/>
    <link rel="stylesheet" href="../../../_/css/site.css">
    <!-- Right now for demo purposes I'm using google icons, but once we finalize design might be different -->
    <!-- Not using it for now
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
<!--
      <a class="navbar-item" href="https://www.restcomm.com/docs"><img width="140px" src="../../../_/img/restcomm-logo-white.svg"></a>
-->
      <a class="navbar-item header-logo-link" href="https://www.restcomm.com/docs"></a>
<!--
      <a class="navbar-item" href="https://www.restcomm.com/docs">Restcomm CPaaS Enablement Docs</a>
-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- TODO: Bring back when we integrate with searching facilities
        <a class="navbar-item" href="#"><i class="material-icons">search</i></a>
        -->
        <a class="navbar-item" href="https://cloud.restcomm.com/#/login">Sign in</a>
        <div class="navbar-item">
          <span>
            <a id="signup" class="button" href="https://cloud.restcomm.com/#/signup">Sign up</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>

<div class="main-wrapper">
<div class="navigation-container" data-component="Restcomm-CSP" data-version="1.0" >
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Restcomm CPaaS Enablement Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="voice-category.html">Voice</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="calls-api.html">Calls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="recordings-api.html">Recordings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="clients-api.html">Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="conferences-api.html">Conference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="participants-api.html">Participants</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="incoming-phone-numbers-api.html">Incoming Phone Numbers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="sms-category.html">SMS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="sms.html">Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_send_sms">Send SMS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_get_sms_list">Get SMS List</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_get_single_sms_information">Get single SMS Information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_sms_attributes">SMS Attributes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="numbers.html">Numbers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="rcml-category.html">RCML</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dial.html">Dial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="numbers.html">Number</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gather.html">SIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gather.html">Gather</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#">say.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="play.html">Play</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore" style="display: none;">
  <div class="context">
    <span class="title">Restcomm CPaaS Enablement Docs</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Restcomm CPaaS Enablement Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">Restcomm CPaaS Enablement Docs</a></li>
    <li class="crumb"><a href="Restcomm Visual Designer - Using Web Trigger.html">Web Trigger Overview</a></li>
  </ul>
</nav>
</div>
<article class="doc ">
  <h1>Web Trigger Overview</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Web Trigger is an alternative way to start a voice application. It allows establishing a call between an RVD application and a destination address using a simple HTTP request.
Any RVD Voice application can be configured to be started using Web Trigger. The process of doing that is roughly the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a Voice application in RVD.</p>
</li>
<li>
<p>Enable and configure Web Trigger feature for this application.</p>
</li>
<li>
<p>Start your application by making a request to the WebTrigger URL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other features of Web Trigger include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom authentication using an application-specific token.</p>
</li>
<li>
<p>Initialization of RVD variables by using HTTP parameters.</p>
</li>
<li>
<p>Control caller identifier that will be presented to the callee.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Web Trigger relies on the Restcomm Calls REST API to do the actual work. You can find more information on how a call between an RCML application and a destination address is established at <a href="#">../api/calls-api.adoc#calls</a>.</p>
</div>
<div class="paragraph">
<p>In the following example we will create a sample application that, when
 trigrred, will establish a call between a Restcomm Client and the application and execute it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_1_create_the_voice_application"><a class="anchor" href="#_step_1_create_the_voice_application"></a>Step 1 - Create the Voice application</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Log into RVD and create a new project named TestWebTrigger.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No need to change anything yet. If you don&#8217;t know what RVD is and how to create an application please have a look at <a href="#">RVD Basic Tasks</a> first.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_2_enable_web_trigger"><a class="anchor" href="#_step_2_enable_web_trigger"></a>Step 2 - Enable Web Trigger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the project menu, click on <em>Web Trigger</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/show_web_trigger_form.png" alt="show_web_trigger_form" width="624" height="75"></span></p>
</div>
<div class="paragraph">
<p>Then, check <em>Enable Web Trigger</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/WebTrigger_enable.png" alt="web_trigger_enable" width="489" height="230"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_3_register_your_sip_client"><a class="anchor" href="#_step_3_register_your_sip_client"></a>Step 3 - Register your SIP client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will need a registered destination address to receive the triggered call.
Fire up your favourite SIP client and register to your Restcomm instance as <strong>alice</strong>. Default password is <em>1234.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_4_trigger_a_call"><a class="anchor" href="#_step_4_trigger_a_call"></a>Step 4 - Trigger a call</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using your favorite REST client make a call to the WebTrigger URL. You can copy it from the configuration form:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/WebTrigger_copy_URL.png" alt="copy_web_trigger_url"></span></p>
</div>
<div class="paragraph">
<p>Before making the request you need to specify a destination for the call in the <code>to</code> parameter. You may use the <em>client</em>
you just registered. The destination goes in the <code>to</code> parameter of the request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://this:8080/visual-designer/services/apps/APdc8c1eea063d4a85b64a5bebda8e8c04/start?to=client:alice</pre>
</div>
</div>
<div class="paragraph">
<p>Notice <em>client:</em> prefix in the <code>to</code> parameter.</p>
</div>
<div class="paragraph">
<p>Also, WebTrigger supports Basic HTTP authentication. Use your restcomm account credentials in order
to authenticate. In this example we will use <strong>administrator@company.com</strong> / <strong>RestComm</strong>.</p>
</div>
<div class="paragraph">
<p>Here is the cURL command to make the request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ curl -X GET --user 'administrator@company.com:RestComm' 'http://this:8080/visual-designer/services/apps/APdc8c1eea063d4a85b64a5bebda8e8c04/start?to=client:alice'</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to specifying the destination of the call, the caller ID may also be specified (optional) using
the <code>from</code> parameter. Here is the how the trigger URL  will look like when the caller ID  is set to <strong>bob</strong>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>.../start?to=client:alice&amp;from=bob</pre>
</div>
</div>
<div class="paragraph">
<p>At this point you should be able to trigger a call to your registered client and listen to
 your application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authenticate_with_application_specific_tokens"><a class="anchor" href="#_authenticate_with_application_specific_tokens"></a>Authenticate with application-specific tokens</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In case you don&#8217;t want to reveal your account credentials to the user of the trigger you can
use an alternative form of authentication that relies on custom application-specific tokens. To enable it
you will need to define an arbitrary security token in the configuration form and then use it in the request that
will trigger the call. If the tokens match the request will be accepted.</p>
</div>
<div class="paragraph">
<p>Here is the configuration form with the <em>application access token</em> set to <strong>MyTopSeCrEt</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/WebTrigger_specify_application_token.png" alt="specify_application_access_token"></span></p>
</div>
<div class="paragraph">
<p>Since there are no Basic HTTP authentication headers involved you may easily trigger the call by typing the WebTrigger URL
directly in the browser:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://this:8080/visual-designer/services/apps/APdc8c1eea063d4a85b64a5bebda8e8c04/start?to=client:alice&amp;token=MyTopSeCrEt</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Before giving it a try make sure that you have configured
 <a href="#configure-restcomm-api-credentials">Restcomm API credentials</a> in RVD settings.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_call_source_and_destination_overrides"><a class="anchor" href="#_call_source_and_destination_overrides"></a>Call source and destination overrides</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There can be cases when the destination or the source of a WebTrigger call should be locked
down to a fixed value and not be controlled from the request. In order to do that <em>overrides</em> can
be provided in the configuration form as follows:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/WebTrigger_overrides.png" alt="source_dest_overrides"></span></p>
</div>
<div class="paragraph">
<p>Now, the <code>to</code> and <code>form</code> parameters in the HTTP request will be ignored and values in the form
will be used instead.</p>
</div>
<div class="sect2">
<h3 id="_configure_restcomm_api_access_credentials"><a class="anchor" href="#_configure_restcomm_api_access_credentials"></a>Configure Restcomm API access credentials</h3>
<div class="paragraph">
<p>In order to use application-specific tokens Restcomm API credentials should be configured in RVD
 settings. RVD relies on Restcomm Calls REST API to create the actual call between the
 application and the destination address. For that, it needs to know the credentials of
 the Restcomm Account that will make the call.</p>
</div>
<div class="paragraph">
<p>To supply these credentials:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the top right gear icon as illustrated bellow:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/show_ide_settings_profile_form.png" alt="show_ide_settings_profile_form" width="300" height="56"></span></p>
</div>
<div class="paragraph">
<p>This will bring up the IDE Settings form for the logged user:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/ide_settings_profile_form_complete.png" alt="ide_settings_profile_form_complete" width="300" height="179"></span></p>
</div>
<div class="paragraph">
<p>Supply the credentials of the Restcomm account that will be used to create the call.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set <strong>Username</strong> to the restcomm username on whose behalf the calls will be made. In this tutorial we used <em>administrator@company.com</em></p>
</li>
<li>
<p>Set <strong>Password</strong> to the <em>AuthToken</em> of your account displayed in Dashboard.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_variables"><a class="anchor" href="#_adding_variables"></a>Adding variables</h3>
<div class="paragraph">
<p>Application behaviour can be further enhanced by adding parameters to your trigger URL.
All additional parameters will be converted to RVD variables and can be used in your application.</p>
</div>
<div class="paragraph">
<p>Bellow is a personalized greeting of the application using <code>firstname</code> and <code>lastname</code> variables.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/add_variables_to_the_mix.png" alt="add_variables_to_the_mix" width="763" height="341"></span></p>
</div>
<div class="paragraph">
<p>This application will use the <em>firstname</em> and <em>lastname</em> parameters from a trigger URL like the
following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://this:8080/visual-designer/services/apps/APdc8c1eea063d4a85b64a5bebda8e8c04/start?to=client:alice&amp;firstname=nick&amp;lastname=the+greek</pre>
</div>
</div>
<div class="sect3">
<h4 id="_variable_scope"><a class="anchor" href="#_variable_scope"></a>Variable scope</h4>
<div class="paragraph">
<p>In the example above <code>firstname</code> and <code>lastname</code> parameters defined in the url will result in creating module-scoped
RVD variables. This means that the variables will be available only in the first module
execution. To make them last for the whole application lifecycle the 'User parameter scope'
option in <em>Advanced configuration</em> options should be set to <em>Application</em> as illustrated below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/WebTrigger_application_scoped_vars.png" alt="application_scoped_variables"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_destination_address_syntax"><a class="anchor" href="#_destination_address_syntax"></a>Destination address syntax</h4>
<div class="paragraph">
<p>Throughout this tutorial we have only used <em>client</em> destinations for the call. Restcomm
Calls REST API and consequently RVD WebTrigger support four different types of destination
address. Any of these types can be used as a destination address. Here are some example
values you can use as destinations either directly in the URL <code>to</code> parameter or as overrides
 in the configuration form.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>client</strong></p>
<div class="ulist">
<ul>
<li>
<p>client:alice</p>
</li>
<li>
<p>client:bob</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>sip</strong></p>
<div class="ulist">
<ul>
<li>
<p>sip:bob@192.168.1.39:5060</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>conference</strong></p>
<div class="ulist">
<ul>
<li>
<p>conference:2233</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>number</strong></p>
<div class="ulist">
<ul>
<li>
<p>+1234598323</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure you url-encode these values if you specify the <strong>to</strong> destination in the trigger URL!
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column-container">
      <div class="footer-column">
        <h5 class="footer-column-title">Products</h5>
        <p><a href="programmable.html#_getting_started_with_programmable_voice">Programmable Voice</a></p>
        <p><a href="programmable.html#_getting_started_with_programmable_sms">Programmable SMS</a></p>
        <p><a href="message-exchange.html">Message Exchange</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Use cases</h5>
        <p><a href="https://www.restcomm.com/use-cases/two-factor-authentication-2fa/">Two-factor authentication (2FA)</a></p>
        <p><a href="https://www.restcomm.com/use-cases/phone-number-masking/">Phone number masking</a></p>
        <p><a href="https://www.restcomm.com/voicemail-using-restcomm-visual-designer/">Interactive Voicemail to Email Application</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Learn</h5>
        <p><a href="https://www.restcomm.com/docs">Documentation</a></p>
        <p><a href="https://www.restcomm.com/blog/">Blog</a></p>
        <p><a href="support.html">Terms And Conditions</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Contact us</h5>
        <p>+1 650 263 6146</p>
        <p>
          <span><a href="https://twitter.com/restcomm"><i class="fab fa-twitter"></i></a></span>
          <span><a href="https://www.linkedin.com/company/telestax"><i class="fab fa-linkedin-in"></i></a></span>
          <span><a href="https://www.facebook.com/Telestax/"><i class="fab fa-facebook-f"></i></a></span>
          <span><a href="https://www.youtube.com/channel/UCrZ-J48d3AdwGdL01XuZKZQ"><i class="fab fa-youtube"></i></a></span>
          <span><a href="https://plus.google.com/+Restcomm"><i class="fab fa-google-plus-g"></i></a></span>
          <span><a href="https://www.restcomm.com/blog/"><i class="fas fa-rss"></i></a></span>
        </p>
      </div>
    </div>
    <div class="footer-bottom-container">
      <div class="footer-logo">
        <a class="footer-logo-link" href="https://telestax.com"></a>
      </div>
      <div class="footer-copyright">
        <p class="footer-copyright-paragraph">COPYRIGHT © 2018, TELESTAX INC., ALL RIGHTS RESERVED.</p>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<!--
  Tried to get this chunk into js/05-countly.js but it has some issues with the async loading so fell back to putting it here
  where it works for some reason
-->
  <!-- Only enable countly if the key is set -->
  <script type='text/javascript' src='https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'></script>
  <script>
    var Countly = Countly || {}
    Countly.q = Countly.q || []

    // provide countly initialization parameters
    Countly.app_key = '56bdc77c4c53e32ebd439e2586dd4ee22b3d3ad0'
    Countly.url = 'https://restcomm.count.ly'

    Countly.q.push(['track_sessions'])
    Countly.q.push(['track_pageview'])
    Countly.q.push(['track_clicks'])
    Countly.q.push(['track_errors'])
    Countly.q.push(['track_links'])
    Countly.q.push(['track_forms'])
    Countly.q.push(['collect_from_forms'])

    // send event
    Countly.q.push(['add_event', {
      key: 'Restcomm CSPs Documentation',
      segmentation: {},
    }]);

    // load countly script asynchronously
    (function () {
      var cly = document.createElement('script')
      cly.type = 'text/javascript'
      cly.async = true
      // enter url of script here
      cly.src = 'https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'
      cly.onload = function () {
        Countly.init()
      }
      var s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(cly, s)
    })()
  </script>


  </body>
</html>
