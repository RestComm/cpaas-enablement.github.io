<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restcomm REST API :: Restcomm CPaaS Enablement Docs</title>
    <link rel="canonical" href="https://www.restcomm.com/docs/Restcomm-CSP/1.0/api/Restcomm - Multi-tenancy and Managing Sub-Accounts.html">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" type="image/png" href="../../../_/img/favicon.png"/>
    <link rel="stylesheet" href="../../../_/css/site.css">
    <!-- Right now for demo purposes I'm using google icons, but once we finalize design might be different -->
    <!-- Not using it for now
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
<!--
      <a class="navbar-item" href="https://www.restcomm.com/docs"><img width="140px" src="../../../_/img/restcomm-logo-white.svg"></a>
-->
      <a class="navbar-item header-logo-link" href="https://www.restcomm.com/docs"></a>
<!--
      <a class="navbar-item" href="https://www.restcomm.com/docs">Restcomm CPaaS Enablement Docs</a>
-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- TODO: Bring back when we integrate with searching facilities
        <a class="navbar-item" href="#"><i class="material-icons">search</i></a>
        -->
        <a class="navbar-item" href="https://cloud.restcomm.com/#/login">Sign in</a>
        <div class="navbar-item">
          <span>
            <a id="signup" class="button" href="https://cloud.restcomm.com/#/signup">Sign up</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>

<div class="main-wrapper">
<div class="navigation-container" data-component="Restcomm-CSP" data-version="1.0" >
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Restcomm CPaaS Enablement Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="voice-category.html">Voice</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="calls-api.html">Calls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="recordings-api.html">Recordings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="clients-api.html">Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="conferences-api.html">Conference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="participants-api.html">Participants</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="incoming-phone-numbers-api.html">Incoming Phone Numbers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="sms-category.html">SMS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="sms.html">Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_send_sms">Send SMS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_get_sms_list">Get SMS List</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_get_single_sms_information">Get single SMS Information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sms.html#_sms_attributes">SMS Attributes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="numbers.html">Numbers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="rcml-category.html">RCML</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dial.html">Dial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="numbers.html">Number</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gather.html">SIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gather.html">Gather</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="say.html">Say</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="play.html">Play</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore" style="display: none;">
  <div class="context">
    <span class="title">Restcomm CPaaS Enablement Docs</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Restcomm CPaaS Enablement Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">Restcomm CPaaS Enablement Docs</a></li>
    <li class="crumb"><a href="Restcomm - Multi-tenancy and Managing Sub-Accounts.html">Restcomm REST API</a></li>
  </ul>
</nav>
</div>
<article class="doc ">
  <h1>Restcomm REST API</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_restcomm_admin_ui">Restcomm Admin UI</a></li>
<li><a href="#_security_constraints">Security constraints</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In our continuous effort to improve Restcomm functionalities, we have introduced multi-tenancy as part of <a href="http://www.telestax.com/telscale-restcomm-7-4-0-ga-released/">Restcomm 7.4.0</a>. Multi tenancy support provides a set of rules that improve user information management and control who can gain access to specific accounts. This set of rules will be also applied by the upcoming OAuth support, so they both OAuth and Multi-tenancy Support will handle this consistency together. The information below will provide an overview of how multi-tenancy is applied to Restcomm.</p>
</div>
<div class="paragraph">
<p>Restcomm REST API access control is managed by two main entities, credentials and accounts. To better understand how it works, we&#8217;ll assume the following diagram as the account hierarchy, where each account and sub account has its own information.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/ElementTree-4.png" alt="ElementTree-4" width="656" height="322"></span></p>
</div>
<div class="paragraph">
<p>Considering that Primary and Secondary accounts represents different Restcomm users, they will not be able to manage information from each other. So if Primary Account tries to access the REST API using its own credentials but requesting for the list of DIDs of the Secondary Account, the response will be a HTTP 401 error. The 'curl' command below represents the given situation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lang:default hljs" data-lang="lang:default">curl -X GET https://&lt;accountSid&gt;:&lt;authToken&gt;@cloud.restcomm.com/restcomm/2012-04-24/Accounts/[secondarySid]/IncomingPhoneNumbers.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned above, there are more possible combinations between credentials and accounts used to request information through the API. But instead list all those possibilities, we can assume the pattern used by the API to control access in a general way, grouped by the result obtained from the API:</p>
</div>
<div class="paragraph">
<p><strong>Allowed:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request information about the same account used as credential</p>
</li>
<li>
<p>Request information about a sub account of the account used as credential</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Denied:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request information about the parent account of the account used as credential</p>
</li>
<li>
<p>Request information about a account of the same level of the account used as credential</p>
</li>
<li>
<p>Request information about a sub account different than the ones from the account used as credential</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This access control is applied to the API&#8217;s: <a href="account-api.html#account" class="page">Account</a>, <a href="incoming-phone-numbers-api.html#incoming-phone-numbers" class="page">IncomingPhoneNumbers</a>, <a href="calls-api.html#calls" class="page">Calls</a>, <a href="sms-api.html#sms" class="page">SMS</a>, OutgoingCallerIds, <a href="recordings-api.html#recordings" class="page">Recordings</a>, <a href="transcriptions-api.html#transcriptions" class="page">Transcriptions</a> and <a href="notifications-api.html#notifications" class="page">Notifications</a>.</p>
</div>
<div class="paragraph">
<p>To understand this rules based on the hierarchy presented by the diagram above, we can assume the following for each account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Primary Account</strong> can view and manage Primary Application, DID P, DID A and DID B only.</p>
</li>
<li>
<p><strong>Subaccount A</strong> can view and manage Application A and DID A only.</p>
</li>
<li>
<p><strong>Subaccount B</strong> can view and manage Application B and DID B only.</p>
</li>
<li>
<p><strong>Secondary Account</strong> can view and manage Application S, DID S, DID C and DID D only.</p>
</li>
<li>
<p><strong>Subaccount C</strong> can view and manage Application C and DID C only.</p>
</li>
<li>
<p><strong>Subaccount D</strong> can view and manage Application D and DID D only.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The Applications API has a different access control, and allows the accounts to manage its own applications only. So, if a request is made to this API using a credential different than the account, the response will be a HTTP 401 error.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_restcomm_admin_ui"><a class="anchor" href="#_restcomm_admin_ui"></a>Restcomm Admin UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The user interface follows a similar behaviour to the API. Is known that the AdminUI currently shows only info related to the logged user, but now the local applications displayed under the 'Restcomm Apps' option were adjusted to follow the same behaviour. This filter is also applied to the available applications when configuring a DID, as shown by the images below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/Screen-Shot-2015-10-05-at-16.40.46.png" alt="Available applications at DID&#8217;s configuration" width="filtered by logged user"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/Screen-Shot-2015-10-05-at-16.35.37.png" alt="[Restcomm Apps list" width="filtered by logged user"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/Screen-Shot-2015-10-05-at-16.34.53.png" alt="RVD Projects created by the user"></span></p>
</div>
<div class="paragraph">
<p>This is the way that multi tenancy support provides access control between accounts, ensuring that only authorized accounts will be able to see and manage another accounts info.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_constraints"><a class="anchor" href="#_security_constraints"></a>Security constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the hostname of the request doesn&#8217;t match the organization domain name of the provided account credential Restcomm-Connect will not allow access.</p>
</div>
<div class="paragraph">
<p>For example, if trying to login to 'https://wonderland.restcomm.com' using account credentials that belong to organization 'https://alice.restcomm.com', Restcomm-Connect will drop the request.</p>
</div>
<div class="paragraph">
<p>Same is true for accessing organization/account resources using REST API. If the hostname of the REST API request doesn&#8217;t match the domain name of the organization that the account credentials belong, Restcomm-Connect will drop the request.</p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column-container">
      <div class="footer-column">
        <h5 class="footer-column-title">Products</h5>
        <p><a href="programmable.html#_getting_started_with_programmable_voice">Programmable Voice</a></p>
        <p><a href="programmable.html#_getting_started_with_programmable_sms">Programmable SMS</a></p>
        <p><a href="message-exchange.html">Message Exchange</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Use cases</h5>
        <p><a href="https://www.restcomm.com/use-cases/two-factor-authentication-2fa/">Two-factor authentication (2FA)</a></p>
        <p><a href="https://www.restcomm.com/use-cases/phone-number-masking/">Phone number masking</a></p>
        <p><a href="https://www.restcomm.com/voicemail-using-restcomm-visual-designer/">Interactive Voicemail to Email Application</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Learn</h5>
        <p><a href="https://www.restcomm.com/docs">Documentation</a></p>
        <p><a href="https://www.restcomm.com/blog/">Blog</a></p>
        <p><a href="support.html">Terms And Conditions</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Contact us</h5>
        <p>+1 650 263 6146</p>
        <p>
          <span><a href="https://twitter.com/restcomm"><i class="fab fa-twitter"></i></a></span>
          <span><a href="https://www.linkedin.com/company/telestax"><i class="fab fa-linkedin-in"></i></a></span>
          <span><a href="https://www.facebook.com/Telestax/"><i class="fab fa-facebook-f"></i></a></span>
          <span><a href="https://www.youtube.com/channel/UCrZ-J48d3AdwGdL01XuZKZQ"><i class="fab fa-youtube"></i></a></span>
          <span><a href="https://plus.google.com/+Restcomm"><i class="fab fa-google-plus-g"></i></a></span>
          <span><a href="https://www.restcomm.com/blog/"><i class="fas fa-rss"></i></a></span>
        </p>
      </div>
    </div>
    <div class="footer-bottom-container">
      <div class="footer-logo">
        <a class="footer-logo-link" href="https://telestax.com"></a>
      </div>
      <div class="footer-copyright">
        <p class="footer-copyright-paragraph">COPYRIGHT © 2018, TELESTAX INC., ALL RIGHTS RESERVED.</p>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<!--
  Tried to get this chunk into js/05-countly.js but it has some issues with the async loading so fell back to putting it here
  where it works for some reason
-->
  <!-- Only enable countly if the key is set -->
  <script type='text/javascript' src='https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'></script>
  <script>
    var Countly = Countly || {}
    Countly.q = Countly.q || []

    // provide countly initialization parameters
    Countly.app_key = '56bdc77c4c53e32ebd439e2586dd4ee22b3d3ad0'
    Countly.url = 'https://restcomm.count.ly'

    Countly.q.push(['track_sessions'])
    Countly.q.push(['track_pageview'])
    Countly.q.push(['track_clicks'])
    Countly.q.push(['track_errors'])
    Countly.q.push(['track_links'])
    Countly.q.push(['track_forms'])
    Countly.q.push(['collect_from_forms'])

    // send event
    Countly.q.push(['add_event', {
      key: 'Restcomm CSPs Documentation',
      segmentation: {},
    }]);

    // load countly script asynchronously
    (function () {
      var cly = document.createElement('script')
      cly.type = 'text/javascript'
      cly.async = true
      // enter url of script here
      cly.src = 'https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'
      cly.onload = function () {
        Countly.init()
      }
      var s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(cly, s)
    })()
  </script>


  </body>
</html>
